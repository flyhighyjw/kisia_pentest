<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
</head> 
<body>
    <h1>Item Management</h1>
    <button class="add-item-btn" onclick="addItem()">Add an Item</button>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0e1a40; color: #d4d4dc; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        h1 { color: #b0c4de; margin-bottom: 20px; }
        .add-item-btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; background-color: #5C8D89; color: white; margin-bottom: 20px; }
        .item-table-container { width: 80%; background-color: #1c2a5e; border-radius: 10px; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5); overflow-x: auto; margin-bottom: 20px; }
        .item-table { width: 100%; border-collapse: collapse; }
        .item-table th, .item-table td { border: 1px solid #b0c4de; padding: 8px; text-align: left; }
        .item-table th:first-child, .item-table td:first-child { width: 30px; white-space: nowrap; }
        .item-table th:last-child, .item-table td:last-child { width: 70px; white-space: nowrap; }
        .item-table th:last-child { min-width: 25%; }
        .item-table th { background-color: #1c2a5e; color: #b0c4de; }
        .item-table tr:nth-child(even) { background-color: #2e3b70; }
        .item-table tr:nth-child(odd) { background-color: #1a2749; }
        .item-table tr:hover { background-color: #3e4b8a; }
        .item-table td { color: #d4d4dc; }
        .edit-btn, .delete-btn, .disable-btn, .enable-btn { padding: 5px 10px; margin-right: 5px; border: none; cursor: pointer; border-radius: 3px; }
        .edit-btn { background-color: #185A9D; color: white; }
        .delete-btn { background-color: #C93E4F; color: white; }
        .disable-btn, .enable-btn { background-color: #185A9D; color: white; }
    </style>
    <div class='item-table-container'>
        <table class='item-table'>
            <tr>
                <th>#</th>
                <th>Item Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
            <?php
            require_once $_SERVER['DOCUMENT_ROOT'].'/3severside/database.php';

            $query = "SELECT * FROM Items";
            $result = execute_query($query);

            if ($result->num_rows > 0) {
                
                while ($row = $result->fetch_assoc()) {
                    echo "<tr>";
                    echo "<td>" . $row['ino'] . "</td>";
                    echo "<td>" . $row['iname'] . "</td>";
                    echo "<td>" . $row['icat'] . "</td>";
                    echo "<td>$" . $row['iprice'] . "</td>";
                    echo "<td>";
                    echo "<button class='edit-btn' onclick='editItem(" . $row['ino'] . ")'>Edit</button>";
                    echo "<button class='delete-btn' onclick='deleteItem(" . $row['ino'] . ")'>Delete</button>";
                    echo "<button class='" . ($row['istat'] == 1 ? 'disable-btn' : 'enable-btn') . "' onclick='toggleItemStatus(" . $row['ino'] . "," . $row['istat'] . ")'>" . ($row['istat'] == 1 ? 'Disable' : 'Enable') . "</button>";
                    echo "</td>";
                    echo "</tr>";
                }
                
            } else {
                echo "No items found.";
            }
            ?>
        </table>
    </div>

    <script>
        // Function to handle editing an item
        function editItem(itemId) {
            // Implement your edit logic here
            window.location.href = '/1internals/admin/descr_edit.php?ino=' + itemId;
        }

        // Function to handle deleting an item
        function deleteItem(itemId) {
            // Redirect to item_mgmt_action.php with delete action and item ID
            window.location.href = 'item_mgmt_action.php?action=delete&item=' + itemId;
        }

        // Function to handle toggling item status
        function toggleItemStatus(itemId, currentStatus) {
            // Redirect to item_mgmt_action.php with toggle action and item ID
            window.location.href = 'item_mgmt_action.php?action=' + (currentStatus == 1 ? 'disable' : 'enable') + '&item=' + itemId;
        }

        // Function to handle adding a new item
        function addItem() {
            // Implement your add item logic here
            console.log('Adding a new item');
        }
    </script>
</body>
</html>
